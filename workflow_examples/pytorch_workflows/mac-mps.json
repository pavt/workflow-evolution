{
  "name": "Mac MPS",
  "on": {
    "push": {
      "tags": [
        "ciflow/mps/*"
      ]
    },
    "workflow_dispatch": null
  },
  "concurrency": {
    "group": "${{ github.workflow }}-${{ github.event.pull_request.number || github.ref_name }}-${{ github.ref_type == 'branch' && github.sha }}-${{ github.event_name == 'workflow_dispatch' }}",
    "cancel-in-progress": true
  },
  "jobs": {
    "macos-12-py3-arm64-build": {
      "name": "macos-12-py3-arm64",
      "uses": "./.github/workflows/_mac-build.yml",
      "with": {
        "sync-tag": "macos-12-py3-arm64-build",
        "build-environment": "macos-12-py3-arm64",
        "xcode-version": "13.3.1",
        "runner-type": "macos-12-xl",
        "build-generates-artifacts": true,
        "python_version": "3.9.12",
        "environment-file": ".github/requirements/conda-env-macOS-ARM64"
      },
      "secrets": {
        "MACOS_SCCACHE_S3_ACCESS_KEY_ID": "${{ secrets.MACOS_SCCACHE_S3_ACCESS_KEY_ID }}",
        "MACOS_SCCACHE_S3_SECRET_ACCESS_KEY": "${{ secrets.MACOS_SCCACHE_S3_SECRET_ACCESS_KEY }}"
      }
    },
    "macos-12-py3-arm64-mps-test": {
      "name": "macos-12-py3-arm64-mps",
      "uses": "./.github/workflows/_mac-test-mps.yml",
      "needs": "macos-12-py3-arm64-build",
      "with": {
        "sync-tag": "macos-12-py3-arm64-mps-test",
        "build-environment": "macos-12-py3-arm64"
      }
    }
  }
}